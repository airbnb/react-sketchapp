os: osx
language: node_js
notifications:
  email: false
node_js:
  - 12
  - 14
before_install:
  - npm install -g npm
#   - brew update
#   - brew cask install sketch # install Sketch
#   - mkdir -p "~/Library/Application Support/com.bohemiancoding.sketch3/Plugins" # create plugins folder
#   - echo $SKETCH_LICENSE > "~/Library/Application Support/com.bohemiancoding.sketch3/.deployment" # add the Sketch license
before_script:
  - npm prune
script:
  - npm run build # smoke-test that everything transpiles correctly
  - npm run test:ci
  # - npm run test:e2e -- --app=/Applications/Sketch.app
# after_script:
#   - rm "~/Library/App Support/com.bohemiancoding.sketch3/.deployment" # remove the Sketch license
branches:
  except:
    - /^v\d+\.\d+\.\d+$/
